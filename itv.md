#

## 基础知识

### 栈、堆
  * 栈的地址增长方向取决于编译器实现（比如x86的栈是向下增长的，原因是栈向下增长，堆向上增长，可以提高内存利用率），堆的地址是随机的
  * Linux的栈大小默认为8M（ulimit -s），可使用 `ulimit -s` 修改，Windows的栈大小默认为1M（VC6），可使用 `/stack` 参数修改
  
### ESP、EBP
  * ESP（栈指针寄存器/栈指针）永远指向系统栈栈顶
  * EBP（基址指针寄存器/帧指针）永远指向系统栈栈底
  ![image](img/stack_frame.png)

### 字节序

### _stdcall和__stdcall、_fastcall的区别
  * __cdecl是C/C++和MFC程序默认使用的调用约定。函数参数按照从右到左的顺序入栈，并且由调用函数者把参数弹出栈以清理堆栈（可变参数只能用__cdecll；由于每个调用__cdecl函数的代码都要包含清理堆栈的代码，产生的可执行文件大小会比较大）
  * __stdcall调用约定用于调用Win32 API函数。函数参数按照从右到左的顺序入栈，被调用的函数在返回前清理传送参数的栈，函数参数个数固定
  * __fastcall约定用于对性能要求非常高的场合。_fastcall约定将函数的从左边开始的两个大小不大于4个字节（DWORD）的参数分别放在ECX和EDX寄存器，其余的参数仍旧自右向左压栈传送，被调用的函数在返回前清理传送参数的堆栈。（__fastcall可以写成_fastcall）
  * thiscall仅仅应用于"C++"成员函数。this指针存放于CX寄存器，函数参数按照从右到左的顺序入栈，不能被程序员指定